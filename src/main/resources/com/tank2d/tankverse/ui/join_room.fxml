<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.effect.DropShadow?>

<AnchorPane prefHeight="700.0" prefWidth="1000.0"
            xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.tank2d.tankverse.ui.JoinRoomController">

    <style>
        -fx-background-color:
        radial-gradient(center 50% 50%, radius 80%, #a1c4a0 0%, #8ab48f 70%, #6b9080 100%);
    </style>

    <VBox alignment="TOP_CENTER" layoutX="150.0" layoutY="60.0" prefHeight="580.0" prefWidth="700.0"
          spacing="18.0"
          style="-fx-background-color: #f4e8c1;
                  -fx-border-color: #704214;
                  -fx-border-width: 6;
                  -fx-background-radius: 12;
                  -fx-border-radius: 12;
                  -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.5), 20, 0, 0, 10);">

        <padding>
            <Insets bottom="30.0" left="35.0" right="35.0" top="30.0" />
        </padding>

        <!-- Title Section -->
        <VBox alignment="CENTER" spacing="6">
            <Label text="ðŸ›¡ï¸" textFill="#d4a017">
                <font>
                    <Font size="42.0" />
                </font>
                <effect><DropShadow color="#8B4513" radius="3"/></effect>
            </Label>
            <Label text="JOIN ROOM" textFill="#704214">
                <font>
                    <Font name="System Bold" size="34.0" />
                </font>
                <effect><DropShadow color="rgba(244,232,193,0.6)" radius="2"/></effect>
            </Label>
            <Label text="â”â”â” Choose Your Battle Arena â”â”â”" textFill="#8a6f47">
                <font>
                    <Font size="14.0" />
                </font>
            </Label>
        </VBox>

        <!-- Search and Refresh Bar -->
        <HBox spacing="15.0" alignment="CENTER">
            <VBox.margin>
                <Insets top="5.0" />
            </VBox.margin>

            <TextField fx:id="txtSearch" promptText="Search room name..."
                       prefHeight="44.0" HBox.hgrow="ALWAYS"
                       style="-fx-background-color: white;
                           -fx-border-color: #8a6f47;
                           -fx-border-width: 2;
                           -fx-background-radius: 4;
                           -fx-border-radius: 4;
                           -fx-font-size: 13px;">
            </TextField>

            <Button fx:id="btnRefresh" mnemonicParsing="false"
                    onAction="#onRefresh" prefHeight="44.0" prefWidth="130.0" text="ðŸ”„ REFRESH"
                    style="-fx-background-color: linear-gradient(to bottom, #d9b382, #d4a574);
                        -fx-border-color: #a67c52;
                        -fx-border-width: 3;
                        -fx-text-fill: white;
                        -fx-font-weight: bold;
                        -fx-background-radius: 8;
                        -fx-cursor: hand;">
                <font>
                    <Font name="System Bold" size="13.0" />
                </font>
            </Button>
        </HBox>

        <!-- Room List Section -->
        <VBox spacing="8.0" VBox.vgrow="ALWAYS">
            <Label text="AVAILABLE ROOMS" textFill="#704214" style="-fx-font-weight: bold;">
                <font>
                    <Font name="System Bold" size="13.0" />
                </font>
            </Label>

            <TableView fx:id="tableRooms" prefHeight="250.0" VBox.vgrow="ALWAYS"
                       style="-fx-background-color: #fff8e1;
                           -fx-border-color: #8a6f47;
                           -fx-border-width: 2;
                           -fx-background-radius: 4;
                           -fx-border-radius: 4;">
                <columns>
                    <TableColumn fx:id="colRoomName" text="Room Name" prefWidth="280.0" />
                    <TableColumn fx:id="colPlayers" text="Players" prefWidth="90.0" />
                    <TableColumn fx:id="colMaxPlayers" text="Max" prefWidth="70.0" />
                    <TableColumn fx:id="colStatus" text="Status" prefWidth="120.0" />
                    <TableColumn fx:id="colLocked" text="ðŸ”’" prefWidth="70.0" />
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                </columnResizePolicy>
            </TableView>
        </VBox>

        <!-- Password Input Box (Hidden by default) -->
        <HBox fx:id="passwordBox" spacing="15.0" alignment="CENTER_LEFT" visible="false"
              style="-fx-background-color: #fff8e1; -fx-padding: 12; -fx-background-radius: 6; -fx-border-color: #d7ccc8; -fx-border-width: 1; -fx-border-radius: 6;">
            <Label text="ðŸ”‘ ROOM PASSWORD" textFill="#704214" style="-fx-font-weight: bold;">
                <font>
                    <Font name="System Bold" size="13.0" />
                </font>
            </Label>
            <PasswordField fx:id="txtPassword" promptText="Enter room password"
                           prefHeight="38.0" HBox.hgrow="ALWAYS"
                           style="-fx-background-color: white;
                           -fx-border-color: #8a6f47;
                           -fx-border-width: 2;
                           -fx-background-radius: 4;
                           -fx-border-radius: 4;
                           -fx-font-size: 13px;">
            </PasswordField>
        </HBox>

        <!-- Status Label -->
        <Label fx:id="lblStatus" text="Select a room to join" textFill="#8a6f47" wrapText="true" alignment="CENTER"
               style="-fx-background-color: #fff8e1; -fx-padding: 8; -fx-background-radius: 6; -fx-border-color: #d7ccc8; -fx-border-width: 1; -fx-border-radius: 6;" minHeight="32">
            <font>
                <Font size="12.0" />
            </font>
        </Label>

        <!-- Action Buttons -->
        <HBox spacing="15.0" alignment="CENTER">
            <VBox.margin>
                <Insets top="5.0" />
            </VBox.margin>

            <Button fx:id="btnJoin" mnemonicParsing="false"
                    onAction="#onJoin" prefHeight="48.0" prefWidth="200.0" text="JOIN ROOM"
                    style="-fx-background-color: linear-gradient(to bottom, #7a9c8e, #6b9080);
                        -fx-border-color: #4a6859;
                        -fx-border-width: 3;
                        -fx-text-fill: white;
                        -fx-font-weight: bold;
                        -fx-background-radius: 8;
                        -fx-cursor: hand;">
                <font>
                    <Font name="System Bold" size="15.0" />
                </font>
            </Button>

            <Button fx:id="btnBack" mnemonicParsing="false"
                    onAction="#onBack" prefHeight="48.0" prefWidth="140.0" text="BACK"
                    style="-fx-background-color: linear-gradient(to bottom, #d95e61, #c54245);
                        -fx-border-color: #8b2e31;
                        -fx-border-width: 3;
                        -fx-text-fill: white;
                        -fx-font-weight: bold;
                        -fx-background-radius: 8;
                        -fx-cursor: hand;">
                <font>
                    <Font name="System Bold" size="15.0" />
                </font>
            </Button>
        </HBox>

    </VBox>

    <!-- Decorative corner elements -->
    <Label layoutX="30.0" layoutY="30.0" text="âš”ï¸" textFill="#5d4037">
        <font><Font size="36.0"/></font>
        <effect><DropShadow color="#8B4513" radius="3" /></effect>
    </Label>
    <Label layoutX="930.0" layoutY="30.0" text="ðŸ›¡ï¸" textFill="#d4a017">
        <font><Font size="36.0"/></font>
        <effect><DropShadow color="#8B4513" radius="3" /></effect>
    </Label>
    <Label layoutX="30.0" layoutY="630.0" text="ðŸŽ¯" textFill="#c54245">
        <font><Font size="34.0"/></font>
    </Label>
    <Label layoutX="930.0" layoutY="630.0" text="ðŸ’¥" textFill="#d4a574">
        <font><Font size="34.0"/></font>
    </Label>

</AnchorPane>